"use strict";var stations=[],fromValidStation=!1,toValidStation=!1;fetch("https://huxley.apphb.com/crs").then(function(e){return e.json()}).then(function(e){e.map(function(e){return stations.push(e.stationName)}),stations=stations.map(function(e){return e.toLowerCase()})})["catch"](function(e){document.getElementById("departure").disabled=!0,document.getElementById("destination").disabled=!0,document.getElementById("departure").style.opacity=.3,document.getElementById("destination").style.opacity=.3,document.getElementById("title").innerHTML="<span id='offline'>No Network Connection</span> - UK Train Times"});var getTrains=function(e,t){var n="https://huxley.apphb.com/departures/"+e+"/to/"+t+"?accessToken=3bb783d8-9df4-4be0-98bb-c25d56f391fd";fetch(n).then(function(e){return e.json()}).then(function(e){console.log(e)})},departureStationLookup=function(){document.getElementById("error-message").innerHTML="",document.getElementById("departureSuggestions").innerHTML="";var e=document.getElementById("departure").value;e=e.toLowerCase(),stations.indexOf(e)>-1?(document.getElementById("departure").style.border="1px solid rgba(25, 210, 25, 0.7)",fromValidStation=!0,toValidStation&&fetchTrainTimes()):(document.getElementById("departure").style.border="1px solid black",fromValidStation=!1,document.getElementById("train-times").innerHTML="");var t=stations.filter(function(t){return t.match(e)});t.length<11&&t.map(function(e){return document.getElementById("departureSuggestions").innerHTML+='<div class="suggested-departure-station" name="'+e+'">'+e+"</div><br>"}),$(".suggested-departure-station").on("click",function(){document.getElementById("departure").value=this.getAttribute("name"),document.getElementById("departureSuggestions").innerHTML="",stations.indexOf(document.getElementById("departure").value)>-1?(document.getElementById("departure").style.border="1px solid rgba(25, 210, 25, 0.7)",fromValidStation=!0,toValidStation&&fetchTrainTimes()):(document.getElementById("departure").style.border="1px solid black",fromValidStation=!1,document.getElementById("train-times").innerHTML="")})},destinationStationLookup=function(){document.getElementById("error-message").innerHTML="",document.getElementById("destinationSuggestions").innerHTML="";var e=document.getElementById("destination").value;e=e.toLowerCase(),stations.indexOf(e)>-1?(document.getElementById("destination").style.border="1px solid rgba(25, 210, 25, 0.7)",toValidStation=!0,fromValidStation&&fetchTrainTimes()):(document.getElementById("destination").style.border="1px solid black",toValidStation=!1,document.getElementById("train-times").innerHTML="");var t=stations.filter(function(t){return t.match(e)});t.length<11&&t.map(function(e){return document.getElementById("destinationSuggestions").innerHTML+='<div class="suggested-destination-station" name="'+e+'">'+e+"</div><br>"}),$(".suggested-destination-station").on("click",function(){document.getElementById("destination").value=this.getAttribute("name"),document.getElementById("destinationSuggestions").innerHTML="",stations.indexOf(document.getElementById("destination").value)>-1?(document.getElementById("destination").style.border="1px solid rgba(25, 210, 25, 0.7)",toValidStation=!0,fromValidStation&&fetchTrainTimes()):(document.getElementById("destination").style.border="1px solid black",toValidStation=!1,document.getElementById("train-times").innerHTML="")})},fetchTrainTimes=function(){var e=document.getElementById("departure").value,t=document.getElementById("destination").value;if(e==t)document.getElementById("error-message").innerHTML="Please select different stations";else{document.getElementById("error-message").innerHTML="";var n="https://huxley.apphb.com/departures/"+e+"/to/"+t+"?accessToken=3bb783d8-9df4-4be0-98bb-c25d56f391fd";fetch(n).then(function(e){return e.json()}).then(function(e){for(var t in e.trainServices)null==e.trainServices[t].platform&&(e.trainServices[t].platform="");null==e.trainServices?document.getElementById("error-message").innerHTML="No trains between these stations":(document.getElementById("error-message").innerHTML="",document.getElementById("train-times").innerHTML="<div class='train'><div class='table-row headers'><div class='table-item' >Departure</div><div class='table-item' >Operator</div><div class='table-item' >Platform</div></div></div>",e.trainServices.map(function(e){return document.getElementById("train-times").innerHTML+="<div class='train'><div class='table-row'><div class='table-item'>"+e.std+"</div><div class='table-item'>"+e.operator+"</div><div class='table-item'>"+e.platform+"</div></div></div>"}))})["catch"](function(e){console.log("There has been a problem with your fetch operation: "+e.message)})}};